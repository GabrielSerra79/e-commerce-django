{% extends "base.html" %}
{% load gsfilters %}

{% block conteudo %}
{% if carrinho %}
<div class="row mt-3">
  <div class="col">
    <h3>Carrinho de compras</h3>
    <p class="lead">Os produtos, quantidades e preços que você escolheu.</p>

    <div class="table-responsive">
      <table class="table">
        <tr>
          <th class="d-none d-lg-block">Imagem</th>
          <th>Produto</th>
          <th class="text-center">V.</th>
          <th class="text-right">QTD.</th>
          <th class="text-right">Total</th>
        </tr>

        {% for item in carrinho.values %}
        <tr>
          <td class="d-none d-lg-block">
            <img
              class="cart-img"
              src="{{ item.imagem }}"
            />
          </td>
          <td class="align-content-center">
            <a  href="{% url 'produto:detalhe' item.slug %}">
              {{ item.produto_nome }}
            </a>
            <a class="ml-3" href="{% url 'produto:removedocarrinho' %}?vid={{ item.variacao_id }}">
              <i class="fas fa-times-circle text-danger" aria-hidden="true"></i>
            </a>
          </td>
          <td class="align-content-center text-center">{{ item.variacao_nome }}</td>

          {% if item.preco_unitario_promocional %}
            <td class="align-content-center text-right">{{ item.quantidade }} x {{ item.preco_unitario_promocional|formata_preco }}</td>
          {% else %}
            <td class="align-content-center text-right">{{ item.quantidade }} x {{ item.preco_unitario|formata_preco }}</td>
          {% endif %}

          {% if item.preco_quantitativo_promocional %}
            <td class="align-content-center text-right">{{ item.preco_quantitativo_promocional|formata_preco }}</td>
          {% else %}
            <td class="align-content-center text-right">{{ item.preco_quantitativo|formata_preco }}</td>
          {% endif %}

        </tr>
        {% endfor %}
      </table>
    </div>
  </div>
</div>

<div class="row mt-3">
  <div class="col-lg">
    <p class="lead">Total no carrinho</p>

    <div class="table-responsive">
      <table class="table">
        <tr>
          <td class="font-weight-bold">Total</td>
          <td>R$100000</td>
        </tr>
      </table>
    </div>
  </div>
  <div class="col-lg mt-auto">
    <a class="btn btn-lg btn-block btn-primary" href="#">
      Finalizar a compra
    </a>
  </div>
</div>

{% else %}

<div class="row mt-3">
  <div class="col">
    <h3>Carrinho de compras vazio</h3>
    <p class="lead">Ainda não há produtos no seu carrinho.</p>
  </div>
</div>

{% endif %}

{% endblock conteudo %}
